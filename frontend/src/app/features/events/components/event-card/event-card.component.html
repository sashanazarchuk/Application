<div *ngIf="events$ | async as events">
    <div *ngIf="events.length === 0" class="text-gray-500 text-center">
        No events found.
    </div>

    <div class=" mx-10  w-2/12">
        <input type="text" placeholder="Search events" (input)="onSearch($event.target.value)"
            class="border p-2 rounded w-full mb-4">
    </div>

    <div *ngIf="events.length > 0" class="flex flex-wrap -mx-2 p-10  max-w-full">
        <div *ngFor="let event of events" class="w-full sm:w-1/2 md:w-1/3 px-2 mb-4">
            <div class="p-4 border rounded shadow hover:bg-gray-50 h-full flex flex-col justify-between">
                <h3 class="font-bold text-lg mb-1 cursor-pointer">
                    <span class="inline-block px-1 transition-colors" (click)="goToEventDetails(event)"
                        [ngClass]="event.isAdmin ? 'text-blue-500 hover:text-blue-700' : 'text-gray-800 hover:text-blue-500'">
                        {{ event.title }}
                    </span>
                </h3>
                <p class="text-sm mb-2">{{ event.description }}</p>
                <div class="py-2 ">

                    <p class="text-sm flex text-gray-600 mb-2">
                        <img src="calendar.svg" class="mr-2 w-5 h-5 "> {{ event.date | date:'MMM d, yyyy' }}
                    </p>

                    <p class="text-sm flex text-gray-600 mb-2">
                        <img src="clock.svg" class="mr-2 w-5 h-5"> {{ event.date | date:'HH:mm' }}
                    </p>

                    <p class="text-sm flex text-gray-600 mb-2">
                        <img src="location.svg" class="mr-2 w-5 h-5"> {{ event.location }}
                    </p>

                    <p class="text-sm flex text-gray-500 mb-2">
                        <img src="users.svg" class="mr-2 w-5 h-5">
                        {{ event.currentParticipantsCount }}{{ event.capacity ? '/' + event.capacity : ''
                        }} participants
                        <span *ngIf="event.isFull"> - Full</span>
                    </p>
                </div>
                <button *ngIf="!event.isAdmin && currentUserId" class="text-white font-semibold py-2 px-4 w-full rounded-xl text-center 
               hover:brightness-90 transition disabled:bg-gray-500 disabled:cursor-not-allowed" [ngClass]="event.isJoined
                    ? 'bg-red-600 hover:bg-red-700 cursor-pointer'
                    : 'bg-green-600 hover:bg-green-700 cursor-pointer'" (click)="onToggleJoin(event)"
                    [disabled]="!event.isJoined && event.isFull">
                    {{ event.isJoined ? 'Leave Event' : (event.isFull ? 'Full' : 'Join Event') }}
                </button>
            </div>

        </div>
    </div>
</div>